/* define a page
 */
@page {
   size: $page-width $page-height;

}

@page:left {
  margin: $spread-left-margin;
}

@page:right {
  margin: $spread-right-margin;
}


/* styles for the right hand spread
top right the content of the current chapter then the page number */
@page:right{
   @top-right {
   	   content:  string(doctitle);
   	   margin: 40pt 0 40pt 0;
   	   font-size: 11pt;
       font-family: "Libre Franklin";
   }
   @top-right-corner {
       content: counter(page);
       margin: 40pt 0 40pt 0;
       padding-left: 10pt;
   	   font-size: 11pt;
       font-family: "Libre Franklin";
   }
}

/* styles for the left hand spread
top left book title and current page */
@page:left {
  @top-left-corner {
      content: counter(page);
      margin: 40pt 0 40pt 0;
      padding-right: 10pt;
      font-size: 9pt;
      font-family: "Libre Franklin";
  }

   @top-left {
       margin: 40pt 0 40pt 0;
       content: $book-title;
       font-size: 9pt;
       font-family: "Libre Franklin";
   }
}

/* front matter has a different numbering style */
@page front_matter:right {
  @top-right-corner {
      content: counter(page, lower-roman);
  }
}

@page front_matter:left {
  @top-left-corner {
      content: counter(page, lower-roman);
  }
}


/* add this class to any front matter page that should have roman numeral style numbering */
.set-front-matter { page: front_matter }

.preface, .chapter, .page-frontmatter, .page-about, .page-dedication, .page-toc, .appendix {
      page-break-before: always;
      counter-reset: figurenum tablenum footnote;
}

.page-count-restart {
  counter-reset: page 1;
}

/* increment chapter counter */
.chapter {
  counter-increment: chapternum;
}

.appendix {
  counter-increment: appendixnum;
}


/* reset chapter and figure counters on the body */
body {
	counter-reset: chapternum appendixnum figurenum tablenum footnote;
}

/* get the title of the current chapter - this will be the content of the h1
reset figure counter as figures start from 1 in each chapter */
h1 {
    string-set: doctitle content();
}

.appendix h1::before {
  content: "Appendix " counter(appendixnum, upper-alpha) ": ";
}

/* increment and display figure counter */
figcaption:before {
	counter-increment: figurenum;
	content: counter(chapternum) "-" counter(figurenum) ". ";
}

/* increment and display table counter */
table caption:before {
	counter-increment: tablenum;
	content: counter(chapternum) "." counter(tablenum) ". ";
}

/* footnotes */
.fn {
  float: footnote;
  footnote-style-position: inside;
  @include font-footnotes;
}

.fn {
  counter-increment: footnote;
}

/* this is the marker for the footnote in the content. It is generated by Prince. */
.fn::footnote-call {
  content: counter(footnote);
  font-size: 9pt;
  vertical-align: super;
  line-height: none;
}

/* this is the number of the footnote in the footnotes section of the page. */
.fn::footnote-marker {
  font-size: 9pt;
  vertical-align: super;
  line-height: none;
}

@page {
  @footnotes {
    border-top: 0.6pt solid black;
    padding-top: 8pt;
  }
}

/* front matter bits */
.page-frontmatter {
  @include font-small;
}

.small-centered {
  text-align: center;
}

.copyright {
  text-align: center;
}

ul.credits {
  list-style: none;
  margin: 0 0 1em 0;
  padding: 0;
  column-count: 2;
}

ul.credits li {
  margin: 0;
  list-style: none;
}

.page-dedication {
  text-align: center;

}

.page-dedication .dedication {
  position: absolute;
  margin: auto;
  text-align: center;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
  height: 10em;
}

/* table of contents */
ul.toc {
	list-style: none;
	margin: 0;
	padding: 0;
  font-size: 13pt;
}

ul.toc li.levelH1 {
  margin-top: 20pt;
  font-size: 17pt;
  font-family: "Raleway";
  font-weight: bold;
}

ul.toc li.levelH2 {
  padding-left: 30pt;
  font-family: "Raleway";
  font-size: 12pt;
}

ul.toc li.levelH3 {
  padding-left: 60pt;
  font-family: "Raleway";
  font-size: 12pt;
}

/* Insert the string Chapter followed by generated chapter counter NOT before Preface. */
ul.toc li.levelH1:not(.toc-appendix) a:not([href^="#preface"])::before {
  content: "Chapter " target-counter(attr(href), chapternum) ":";
  color: color(theme,gray);
  font-size: 17pt;
    font-weight: 600;
  padding-right: 20pt;
}

/* Insert the string Appendix followed by generated chapter counter before appendix. */
ul.toc li.levelH1.toc-appendix a::before {
  content: "Appendix " target-counter(attr(href), appendixnum, upper-alpha);
  color: color(theme,black);
  font-size: 17pt;
  padding-right: 20pt;
}

/* create page numbers using target-counter in the TOC */
ul.toc a::after {
  content: leader('.') target-counter(attr(href), page);
  font-size: 13pt;
}

/* the preface uses lower-roman*/
ul.toc .toc-preface a::after {
  content: leader('.') target-counter(attr(href), page, lower-roman);
}


ul.toc li {
	line-height: 2;
  list-style: none;
}

ul.toc li code {
  font-size: 90%;
}

ul.toc li a {
	text-decoration: none;
}

a {
	color: #000;
}

/* add page number to cross references */
a.xref:after {
  content: " (page " target-counter(attr(href, url), page) ")";
}
